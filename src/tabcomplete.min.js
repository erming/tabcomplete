/*!
 * tabcomplete
 * http://github.com/erming/tabcomplete
 * v1.5.1
 */
!function(a){function b(b,c,d){return a.grep(c,function(a){return d?!a.indexOf(b):!a.toLowerCase().indexOf(b.toLowerCase())})}function c(b){var c=this,d=c.prev(".hint");c.css({backgroundColor:"transparent",position:"relative"}),d.length||(c.options.wrapInput&&c.wrap(a("<div>").css({position:"relative",height:c.css("height"),display:"block"===c.css("display")?"block":"inline-block"})),d=c.clone().attr("tabindex",-1).removeAttr("id name placeholder").addClass("hint").insertBefore(c),d.css({position:"absolute"}));var e="";if("undefined"!=typeof b){var f=c.val();e=f+b.substr(f.split(/ |\n/).pop().length)}d.val(e)}function d(a){var b=this,c=b.val();a&&(b.val(c+a.substr(c.split(/ |\n/).pop().length)),b[0].selectionStart=c.length)}var e={backspace:8,tab:9,up:38,down:40};a.tabcomplete={},a.tabcomplete.defaultOptions={after:"",arrowKeys:!1,hint:"placeholder",match:b,caseSensitive:!1,minLength:1,wrapInput:!0},a.fn.tab=a.fn.tabcomplete=function(b,f){function g(){k=-1,m="",l=[]}if(this.length>1)return this.each(function(){a(this).tabcomplete(b,f)});var h=this.prop("tagName");if("INPUT"==h||"TEXTAREA"==h){this.options=f=a.extend(a.tabcomplete.defaultOptions,f),this.unbind(".tabcomplete"),this.prev(".hint").remove();var i=this,j=!1,k=-1,l=[],m="",n=a.noop;switch(f.hint){case"placeholder":n=c;break;case"select":n=d}return this.on("input.tabcomplete",function(){var c=i.val(),d=c.split(/ |\n/).pop();g(),i[0].selectionStart==c.length&&d.length&&(l=f.match(d,b,f.caseSensitive),f.after&&(l=a.map(l,function(a){return a+f.after}))),i.trigger("match",l.length),f.hint&&(("select"!=f.hint||!j)&&d.length>=f.minLength?n.call(i,l[0]):n.call(i,"")),j&&(j=!1)}),this.on("keydown.tabcomplete",function(a){var b=a.which;if(b==e.tab||f.arrowKeys&&(b==e.up||b==e.down)){if(a.preventDefault(),b!=e.up)k++;else{if(-1==k)return;0==k?k=l.length-1:k--}var c=l[k%l.length];if(!c)return;var d=i.val();if(m=m||d.split(/ |\n/).pop(),m.length<f.minLength)return;var h="select"==f.hint?d:d.substr(0,i[0].selectionStart-m.length)+c;i.val(h),"select"==f.hint&&(i[0].selectionStart=h.length),m=c,i.trigger("tabcomplete",m),f.hint&&n.call(i,"")}else a.which==e.backspace?(j=!0,k=-1,m=""):f.hint&&(g(),n.call(i,""))}),f.hint&&n.call(this,""),this.on("blur.tabcomplete",function(){g(),f.hint&&n.call(i,"")}),this}}}(jQuery);